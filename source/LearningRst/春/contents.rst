落标机构通讯协议
===============

通讯协议格式：
HOSTLINK 通讯协议（波特率：9600、数据位：7、校验位；E、停止位:2）

上位机发送格式：

+------------------------+--------+----------+----------+----------+--------+-------------+-----------+
|         说明           | 起始符 | PLC单元号| 命令目的 |  起始字  | 1个字  | HEX异或结果 | *+回车键  |
+========================+========+==========+==========+==========+========+=============+===========+
|                        | 起始符 |  节点号  |  命令符  | 起始地址 | 写数据 |   校验码    |   结束符  |
|     上位机发送格式     +--------+----------+----------+----------+--------+-------------+-----------+
|                        |  @     |    00    |    WR    |   0010   |  0001  |     45      |    *CR    |
+------------------------+--------+----------+----------+----------+--------+-------------+-----------+


PLC响应回复格式：

+------------------------+--------+----------+----------+----------+--------+-------------+-----------+
|         说明           | 起始符 | PLC单元号| 命令目的 |  起始字  | 1个字  | HEX异或结果 | *+回车键  |
+========================+========+==========+==========+==========+========+=============+===========+
|                        | 起始符 |  节点号  |  命令符  | 起始地址 | 写数据 |   校验码    |   结束符  |
|     PLC响应格式        +--------+----------+----------+----------+--------+-------------+-----------+
|                        |  @     |    00    |    WR    |    00    |   45   |             |    *CR    |
+------------------------+--------+----------+----------+----------+--------+-------------+-----------+


上位机发送说明：

电缸调整数据：

当D0等于50时，上位机发送 ``@00WD0000005056*CR``

PLC响应@00WD0053*CR

当上位机发送字符串 ``@00WD0000005056*CR``，D0数据为50，这时两侧电缸立即向内调整为50mm。

注意：总宽度是380mm，两侧电缸向内最大移动距离均为95mm，所以D0≤190mm。

如果产品直径为X，那么380-X=D0，X值取整数。

A类产品：当10.01位等于1时，上位机发送 ``@00WR0010000246*CR``

PLC响应 ``@00WR0045*CR``

B类产品：当10.02位等于1时，上位机发送 ``@00WR0010000440*CR``

PLC响应 ``@00WR0045*CR``

C类产品：当10.03位等于1时，上位机发送 ``@00WR001000084C*CR``

PLC响应 ``@00WR0045*CR``

上位机正常运行信号：当10.00位等于1时，上位机发送 ``@00WR0010000145*CR``

PLC响应 ``@00WR0045*CR``

上位机检测开始时，正常每5秒发送1次

（前提条件是上位机从第一次发送开始算，分类设备正常运行，否则PLC不进行上位机的故障监控）；

当上位机连续10秒内不发送信号时，PLC则认为上位机故障，分类设备上的三色灯红灯闪烁报警。


结束代码说明：

00 正常结束

01 PLC在运行方式下不可执行

02 PLC在监控方式下不可执行

03 UM写保护

04 地址超出区域

0B 编程模式下不能执行命令

13 FCS错误

14 格式错误

15 入口号数据错误

16 命令不支持

18 帧长度错误

19 不可执行
